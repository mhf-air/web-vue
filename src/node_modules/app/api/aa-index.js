const user = require("./user.js") // 用户

let result = {
  ...user,
}

/* 
usage: getArrayFilterData("EnumUser", ["gender"])
result:
  [
    {
      name: "gender",
      title: "性别",
      tag: "enum",
      list: [
        {
          name: "male",
          title: "男",
          selected: false,
        },
        {
          name: "female",
          title: "女",
          selected: false,
        },
      ],
    },
  ]
 */
result.getArrayFilterData = (enumEntityName, includeList) => {
  let out = []

  let entity = result[enumEntityName]
  for (let fieldName of Object.keys(entity)) {
    if (includeList.indexOf(fieldName) < 0) {
      continue
    }

    let fieldValue = entity[fieldName]
    let field = {
      name: fieldName,
      title: fieldValue.title,
      tag: "enum",
    }

    let enumValue = fieldValue.value
    let eList = []
    for (let enumName of Object.keys(enumValue)) {
      eList.push({
        name: enumName,
        title: enumValue[enumName].title,
        selected: false,
      })
    }

    field.list = eList
    out.push(field)
  }

  return out
}

module.exports = result
